{"version":3,"sources":["views/MoviesView.js","helpers/myDebounce.js","views/views.module.scss","helpers/api-data.js","services/api-service.js","components/FilmPagination/FilmPagination.module.scss","components/FilmPagination/FilmPagination.js"],"names":["MoviesList","lazy","MoviesView","useState","movies","setMovies","searchText","setSearchText","page","setPage","total","setTotal","url","useRouteMatch","history","useHistory","locate","useLocation","isFetchDone","setIsFetchDone","debouncedSearch","value","delay","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","useDebounce","text","URLSearchParams","search","get","pageNumber","getMovies","Number","fetchMoviesByKeyword","then","response","results","total_pages","searchQuery","searchPage","push","className","stylesFind","findDone","find","type","name","placeholder","onChange","event","target","length","fallback","FilmPagination","pageTotal","module","exports","getLanguage","lang","localStorage","getItem","setItem","String","setLanguage","BASE_URL","API_KEY","fetchMoviePopular","LANG","fetch","json","query","fetchMovieById","movie_id","fetchMovieByIdCredits","fetchMovieByIdReviews","Stack","spacing","Pagination","styles","pagination","count","color","e","PaginationItem","selected"],"mappings":"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","file":"static/js/movies-view.8269601a.chunk.js","sourcesContent":["import { useState, useEffect, lazy, Suspense } from 'react';\nimport { useRouteMatch, useHistory, useLocation } from 'react-router-dom';\nimport { fetchMoviesByKeyword } from '../services/api-service';\nimport useDebounce from '../helpers/myDebounce';\n\nimport FilmPagination from '../components/FilmPagination';\nimport stylesFind from './views.module.scss';\n\nconst MoviesList = lazy(() =>\n  import(\n    '../components/MovieList/MoviesList.js' /* webpackChunkName: \"movie-list\" */\n  ),\n);\n\nexport default function MoviesView() {\n  const [movies, setMovies] = useState(null);\n  const [searchText, setSearchText] = useState('');\n  const [page, setPage] = useState(1);\n  const [total, setTotal] = useState(0);\n  const { url } = useRouteMatch();\n  const history = useHistory();\n  const locate = useLocation();\n  const [isFetchDone, setIsFetchDone] = useState(false);\n\n  const debouncedSearch = useDebounce(searchText, 500);\n  const handleChange = event => {\n    setSearchText(event.target.value);\n    !event.target.value && setMovies(null);\n    setPage(1);\n    setIsFetchDone(false);\n  };\n\n  useEffect(() => {\n    const text = new URLSearchParams(locate.search).get('query');\n    const pageNumber = new URLSearchParams(locate.search).get('page');\n    text && setSearchText(text);\n    pageNumber && setPage(pageNumber);\n  }, []);\n\n  const getMovies = pageNumber => {\n    setPage(Number(pageNumber));\n    return fetchMoviesByKeyword(searchText, pageNumber).then(response => {\n      setMovies(response.results);\n      setTotal(response.total_pages);\n      setIsFetchDone(true);\n      let searchQuery = searchText ? `query=${searchText}` : '';\n      const searchPage = pageNumber ? `page=${pageNumber}` : '';\n      searchQuery = searchQuery\n        ? searchPage && `${searchQuery}&${searchPage}`\n        : searchQuery;\n\n      history.push({ ...locate, search: `${searchQuery}` });\n    });\n  };\n\n  useEffect(() => {\n    searchText && debouncedSearch && getMovies(page);\n  }, [debouncedSearch]);\n\n  useEffect(() => {\n    searchText && getMovies(page);\n  }, [page]);\n\n  return (\n    <>\n      <label>\n        Find movies\n        <input\n          className={isFetchDone ? stylesFind.findDone : stylesFind.find}\n          type=\"text\"\n          name=\"query\"\n          value={searchText}\n          placeholder=\"Search movies\"\n          onChange={handleChange}\n        />\n      </label>\n      {movies && movies.length > 0 ? (\n        <>\n          <Suspense fallback={<h1>LOADING...</h1>}>\n            <MoviesList movies={movies} locate={locate} url={url} />\n\n            <FilmPagination pageTotal={total} page={page} setPage={setPage} />\n          </Suspense>\n        </>\n      ) : (\n        searchText && <h2>Nothing found on query \"{searchText}\"</h2>\n      )}\n    </>\n  );\n}\n","import { useState, useEffect } from 'react';\n\nexport default function useDebounce(value, delay) {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value]);\n\n  return debouncedValue;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"views_link__1JgOK\",\"activeLink\":\"views_activeLink__1m2DT views_link__1JgOK\",\"isBold\":\"views_isBold__2Ydo4\",\"goBack\":\"views_goBack__1AGvj\",\"title\":\"views_title__3UpWu\",\"movieInfo\":\"views_movieInfo__1Sf4L\",\"moviePoster\":\"views_moviePoster__Znnxk\",\"movieData\":\"views_movieData__1dm-O\",\"movieTitile\":\"views_movieTitile__23JPB\",\"movieText\":\"views_movieText__yfDGx\",\"addInfo\":\"views_addInfo__KIk7R\",\"castList\":\"views_castList__C9f6w\",\"castInfo\":\"views_castInfo__1NXji\",\"castsData\":\"views_castsData__LVGft\",\"castsText\":\"views_castsText__P4rvL\",\"reviewList\":\"views_reviewList__1mPPM\",\"itemPoster\":\"views_itemPoster__ZWRgs\",\"reviewAvatar\":\"views_reviewAvatar__JWOB7\",\"reviewInfo\":\"views_reviewInfo__15omb\",\"find\":\"views_find__2Qz-s\",\"findDone\":\"views_findDone__3GeeH views_find__2Qz-s\"};","export function getData() {\n  let data = localStorage.getItem('themoviedb');\n  if (!data) {\n    return {};\n  }\n\n  try {\n    return JSON.parse(data);\n  } catch (error) {\n    console.log(`Something happened: ${error}`);\n    return {};\n  }\n}\n\n// Language\nexport function getLanguage() {\n  let lang = localStorage.getItem('language');\n  if (!lang) {\n    setLanguage('en-US');\n    return 'en-US';\n  }\n\n  return lang;\n}\n\nexport function setLanguage(lang) {\n  localStorage.setItem('language', String(lang));\n}\n","import { getLanguage } from '../helpers/api-data';\n\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = '7cb7f2a84f35ebc2678afebafcd2cb5f';\n\n// ========== Popular films\nexport function fetchMoviePopular(page) {\n  const LANG = getLanguage();\n  return fetch(\n    `${BASE_URL}/trending/movie/day?api_key=${API_KEY}&page=${page}&language=${LANG}`,\n  ).then(response => {\n    return response.json();\n  });\n}\n\n// ========== Search by keyword\nexport function fetchMoviesByKeyword(query, page = null) {\n  const LANG = getLanguage();\n  if (!page) {\n    page = 1;\n  }\n  return fetch(\n    `${BASE_URL}/search/movie?api_key=${API_KEY}&query=${query}&language=${LANG}&page=${page}&include_adult=false`,\n  ).then(response => response.json());\n}\n\n// ========== Film id\nexport function fetchMovieById(movie_id) {\n  const LANG = getLanguage();\n  return fetch(\n    `${BASE_URL}/movie/${movie_id}?api_key=${API_KEY}&language=${LANG}`,\n  ).then(response => response.json());\n}\n\n// ========== Film actors\nexport function fetchMovieByIdCredits(movie_id) {\n  const LANG = getLanguage();\n  return fetch(\n    `${BASE_URL}/movie/${movie_id}/credits?api_key=${API_KEY}&language=${LANG}`,\n  ).then(response => response.json());\n}\n\n// ========== Film reviews\nexport function fetchMovieByIdReviews(movie_id, page) {\n  const LANG = getLanguage();\n  if (!page) {\n    page = 1;\n  }\n  return fetch(\n    `${BASE_URL}/movie/${movie_id}/reviews?api_key=${API_KEY}&page=${page}&language=${LANG}`,\n  ).then(response => response.json());\n}\n\n// ========== Genres\nexport function fetchMovieGenres() {\n  const LANG = getLanguage();\n\n  return fetch(\n    `${BASE_URL}/genre/movie/list?api_key=${API_KEY}&language=${LANG}`,\n  )\n    .then(response => response.json())\n    .catch(console.log);\n}\n\nexport const themoviedb = {\n  user: 'mamay.ukr',\n  password: 'mamay.ukr',\n  email: 'mamay.ukr.1977@gmail.com',\n  keyV3Auth: '7cb7f2a84f35ebc2678afebafcd2cb5f',\n  keyV4Auth:\n    'eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI3Y2I3ZjJhODRmMzVlYmMyNjc4YWZlYmFmY2QyY2I1ZiIsInN1YiI6IjYxODZlMGM1YzVjMWVmMDAyYzI3NWE1OCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Pgpe2ZFsuuwD752NaRWkXNGvN6Y_7zSj-ucISFoCXyM',\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagination\":\"FilmPagination_pagination__CsGpN\"};","import { Pagination, Stack, PaginationItem } from '@mui/material';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nimport styles from './FilmPagination.module.scss';\n\nexport default function FilmPagination({ pageTotal, page, setPage }) {\n  const locate = useLocation();\n  const history = useHistory();\n  if (!page) {\n    page = 1;\n  }\n\n  const hendlerSubmit = (e, value) => {\n    setPage(value);\n    const searchText = new URLSearchParams(locate.search).get('query');\n    let searchQuery = searchText ? `query=${searchText}` : '';\n    const searchPage = value ? `page=${value}` : '';\n    searchQuery = searchQuery\n      ? searchPage && `${searchQuery}&${searchPage}`\n      : searchPage && `${searchPage}`;\n    history.push({ ...locate, search: `${searchQuery}` });\n  };\n\n  return (\n    <>\n      <Stack spacing={2}>\n        <Pagination\n          className={styles.pagination}\n          count={pageTotal}\n          page={Number(page)}\n          color={'primary'}\n          onChange={hendlerSubmit}\n        >\n          <PaginationItem selected={true} /> ;\n        </Pagination>\n      </Stack>\n      ;\n    </>\n  );\n}\n\nFilmPagination.propTypes = {\n  pageTotal: PropTypes.number.isRequired,\n  page: PropTypes.number,\n  setPage: PropTypes.func.isRequired,\n};\n"],"sourceRoot":""}