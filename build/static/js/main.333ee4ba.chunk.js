(this["webpackJsonpgoit-react-hw-05-movies-vtyshchenko"]=this["webpackJsonpgoit-react-hw-05-movies-vtyshchenko"]||[]).push([[0],{13:function(e,t,c){e.exports={link:"Navigation_link__2BM9A",activeLink:"Navigation_activeLink__2BSDe Navigation_link__2BM9A"}},18:function(e,t,c){e.exports={ButtonWrapper:"Button_ButtonWrapper__33HL5",Button:"Button_Button__2BYYQ"}},2:function(e,t,c){e.exports={link:"views_link__1JgOK",activeLink:"views_activeLink__1m2DT views_link__1JgOK",isBold:"views_isBold__2Ydo4",goBack:"views_goBack__1AGvj",title:"views_title__3UpWu",movieInfo:"views_movieInfo__1Sf4L",moviePoster:"views_moviePoster__Znnxk",movieData:"views_movieData__1dm-O",movieTitile:"views_movieTitile__23JPB",movieText:"views_movieText__yfDGx",addInfo:"views_addInfo__KIk7R",castList:"views_castList__C9f6w",castInfo:"views_castInfo__1NXji",castsData:"views_castsData__LVGft",castsText:"views_castsText__P4rvL",reviewList:"views_reviewList__1mPPM",itemPoster:"views_itemPoster__ZWRgs",reviewAvatar:"views_reviewAvatar__JWOB7",reviewInfo:"views_reviewInfo__15omb",find:"views_find__2Qz-s"}},23:function(e,t,c){e.exports={header:"Header_header__1v0yI"}},24:function(e,t,c){e.exports={container:"Container_container__3eZVY"}},30:function(e,t,c){},40:function(e,t,c){},41:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c.n(a),s=c(20),i=c.n(s),o=c(5),r=c(3),l=(c(30),c(13)),j=c.n(l),u=c(0);function h(){return Object(u.jsxs)("nav",{children:[Object(u.jsx)(o.c,{exact:!0,to:"/",className:j.a.link,activeClassName:j.a.activeLink,children:"Home"}),Object(u.jsx)(o.c,{to:"/movies",className:j.a.link,activeClassName:j.a.activeLink,children:"Movies"})]})}var v=c(23),d=c.n(v);function m(){return Object(u.jsx)("header",{className:d.a.header,children:Object(u.jsx)(h,{})})}var b=c(24),O=c.n(b);function x(e){var t=e.children;return Object(u.jsx)("div",{className:O.a.container,children:t})}var _=c(9),f=c(7);function p(){var e=localStorage.getItem("language");return e||(function(e){localStorage.setItem("language",String(e))}("en-US"),"en-US")}var g="https://api.themoviedb.org/3",w="7cb7f2a84f35ebc2678afebafcd2cb5f";function N(e){var t=p();return fetch("".concat(g,"/trending/movie/day?api_key=").concat(w,"&page=").concat(e,"&language=").concat(t)).then((function(e){return e.json()}))}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=p();return t||(t=1),fetch("".concat(g,"/search/movie?api_key=").concat(w,"&query=").concat(e,"&language=").concat(c,"&page=").concat(t,"&include_adult=false")).then((function(e){return e.json()}))}var L=c(18),B=c.n(L);var y=function(e){var t=e.onClick;return Object(u.jsx)("div",{className:B.a.ButtonWrapper,children:Object(u.jsx)("button",{className:B.a.Button,type:"button",onClick:t,children:"Load more ..."})})},I=c(8),S=c.n(I);var T=function(){var e=Object(a.useState)(null),t=Object(f.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(1),i=Object(f.a)(s,2),l=i[0],j=i[1],h=Object(a.useState)(0),v=Object(f.a)(h,2),d=v[0],m=v[1],b=Object(r.useRouteMatch)().url,O=Object(r.useLocation)();return Object(a.useEffect)((function(){N(l).then((function(e){j(e.page),n(e.results),m(e.total_pages)}))}),[]),Object(a.useEffect)((function(){N(l).then((function(e){var t;t=c&&c.length>0?[].concat(Object(_.a)(c),Object(_.a)(e.results)):Object(_.a)(e.results),n(t),l>1&&window.scrollBy({top:document.documentElement.clientHeight,behavior:"smooth"})}))}),[l]),c?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("ul",{className:S.a.moviesList,children:c.map((function(e){return Object(u.jsx)("li",{className:S.a.movieItem,children:Object(u.jsxs)(o.b,{to:{pathname:"".concat(b,"movies/").concat(e.id),state:{from:O}},children:[Object(u.jsx)("img",{src:"https://image.tmdb.org/t/p/w500".concat(e.poster_path),alt:e.title}),Object(u.jsxs)("div",{className:S.a.info,children:[e.title,Object(u.jsxs)("p",{children:[e.vote_average," / ",e.vote_count]})]})]})},e.id)}))}),l<d&&Object(u.jsx)(y,{onClick:function(){j((function(e){return e+1}))}})]}):Object(u.jsx)("p",{children:"No films"})},P=c(2),C=c.n(P);function R(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{className:C.a.title,children:"Tranding today"}),Object(u.jsx)(T,{})]})}var D=c(19);function F(){var e=Object(a.useState)(null),t=Object(f.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(""),i=Object(f.a)(s,2),l=i[0],j=i[1],h=Object(a.useState)(1),v=Object(f.a)(h,2),d=v[0],m=v[1],b=Object(a.useState)(0),O=Object(f.a)(b,2),x=O[0],p=O[1],g=Object(r.useRouteMatch)().url,w=Object(r.useHistory)(),N=Object(r.useLocation)();return Object(a.useEffect)((function(){var e=new URLSearchParams(N.search).get("query");e&&j(e)}),[]),Object(a.useEffect)((function(){l&&k(l,1).then((function(e){n(e.results),p(e.total_pages),w.push(Object(D.a)(Object(D.a)({},N),{},{search:"query=".concat(l)}))}))}),[l]),Object(a.useEffect)((function(){l&&k(l,d).then((function(e){var t;t=c&&c.length>0?[].concat(Object(_.a)(c),Object(_.a)(e.results)):Object(_.a)(e.results),n(t),d>1&&window.scrollBy({top:document.documentElement.clientHeight,behavior:"smooth"})}))}),[d]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("label",{children:["Find movies",Object(u.jsx)("input",{className:C.a.find,type:"text",name:"query",value:l,placeholder:"Search movies",onChange:function(e){j(e.target.value)}})]}),c&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("ul",{className:S.a.moviesList,children:c.map((function(e){return Object(u.jsx)("li",{className:S.a.movieItem,children:Object(u.jsxs)(o.b,{to:{pathname:"".concat(g,"/").concat(e.id),state:{from:N}},children:[Object(u.jsx)("img",{src:"https://image.tmdb.org/t/p/w500".concat(e.poster_path),alt:e.title}),Object(u.jsxs)("div",{className:S.a.info,children:[e.title,Object(u.jsxs)("p",{children:[e.vote_average," / ",e.vote_count]})]})]})},e.id)}))}),d<x&&Object(u.jsx)(y,{onClick:function(){m((function(e){return e+1}))}})]})]})}var E=c(25);function H(e){var t=e.casts;return t.length>0?Object(u.jsx)("ul",{className:C.a.castList,children:t.map((function(e){return Object(u.jsxs)("li",{className:C.a.castInfo,children:[Object(u.jsx)("img",{className:C.a.itemPoster,src:"https://image.tmdb.org/t/p/w500".concat(e.profile_path),alt:e.name,width:"100px"}),Object(u.jsxs)("div",{className:C.a.castsData,children:[Object(u.jsxs)("p",{className:C.a.castsText,children:[Object(u.jsx)("span",{className:C.a.isBold,children:"name: "}),e.name]}),Object(u.jsxs)("p",{className:C.a.castsText,children:[Object(u.jsx)("span",{className:C.a.isBold,children:"gender: "}),2===e.gender?"man":"wooman"]}),Object(u.jsxs)("p",{className:C.a.castsText,children:[Object(u.jsx)("span",{className:C.a.isBold,children:"popularity: "}),e.popularity]}),Object(u.jsxs)("p",{className:C.a.castsText,children:[Object(u.jsx)("span",{className:C.a.isBold,children:"character: "}),e.character]})]})]},e.name)}))}):Object(u.jsx)("p",{className:C.a.reviewList,children:"We don't have any casts"})}function M(e){var t=e.review;return t.length>0?Object(u.jsx)("ul",{className:C.a.reviewList,children:t.map((function(e){var t=e.author_details.avatar_path?e.author_details.avatar_path.substring(1):"";return Object(u.jsxs)("li",{className:C.a.reviewInfo,children:[Object(u.jsx)("img",{className:C.a.reviewAvatar,src:t,alt:e.author,width:"100px",height:"100px"}),Object(u.jsxs)("div",{className:C.a.castsData,children:[Object(u.jsxs)("p",{className:C.a.castsText,children:[Object(u.jsx)("span",{className:C.a.isBold,children:"name: "}),e.author," (created: ",e.created_at,")"]}),Object(u.jsx)("p",{className:C.a.castsText,children:e.content})]})]},"".concat(e.author,"_").concat(e.created_at))}))}):Object(u.jsx)("p",{className:C.a.reviewList,children:"We don't have any review"})}function W(){var e,t,c=Object(a.useState)(null),n=Object(f.a)(c,2),s=n[0],i=n[1],l=Object(a.useState)(null),j=Object(f.a)(l,2),h=j[0],v=j[1],d=Object(a.useState)(null),m=Object(f.a)(d,2),b=m[0],O=m[1],x=Object(E.useParams)(),_=Object(r.useLocation)(),N=Object(r.useRouteMatch)(),k=N.url,L=N.path;Object(a.useEffect)((function(){(function(e){var t=p();return fetch("".concat(g,"/movie/").concat(e,"?api_key=").concat(w,"&language=").concat(t)).then((function(e){return e.json()}))})(x.movieId).then(i),function(e){var t=p();return fetch("".concat(g,"/movie/").concat(e,"/credits?api_key=").concat(w,"&language=").concat(t)).then((function(e){return e.json()}))}(x.movieId).then(v),function(e,t){var c=p();return t||(t=1),fetch("".concat(g,"/movie/").concat(e,"/reviews?api_key=").concat(w,"&page=").concat(t,"&language=").concat(c)).then((function(e){return e.json()}))}(x.movieId).then(O)}),[]);var B=s&&s.length>0?s.genres.map((function(e){return e.name})).join(", "):"unknown",y=s&&s.length>0?s.production_companies.map((function(e){return e.name})).join(", "):"unknown";return s?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(o.b,{className:C.a.goBack,to:"".concat(null!==(e=null===_||void 0===_||null===(t=_.state)||void 0===t?void 0:t.from)&&void 0!==e?e:"/"),children:"\u2190 go back"}),Object(u.jsxs)("div",{className:C.a.movieInfo,children:[Object(u.jsx)("img",{className:C.a.moviePoster,src:"https://image.tmdb.org/t/p/w500".concat(s.poster_path),alt:s.original_title,"min-width":"300px",height:"400px"}),Object(u.jsxs)("div",{className:C.a.movieData,children:[Object(u.jsx)("h1",{className:C.a.title,children:s.original_title}),Object(u.jsx)("h2",{children:"Overview"}),Object(u.jsx)("p",{className:C.a.movieText,children:s.overview}),Object(u.jsx)("h2",{children:"Genres"}),Object(u.jsx)("p",{className:C.a.movieText,children:B}),Object(u.jsx)("h2",{children:"Popularity"}),Object(u.jsx)("p",{className:C.a.movieText,children:s.popularity}),Object(u.jsx)("h2",{children:"Vote (average / count)"}),Object(u.jsxs)("p",{className:C.a.movieText,children:[s.vote_average," / ",s.vote_count]}),Object(u.jsx)("h2",{children:"Release date"}),Object(u.jsx)("p",{className:C.a.movieText,children:s.release_date}),Object(u.jsx)("h2",{children:"Production companies"}),Object(u.jsx)("p",{className:C.a.movieText,children:y})]})]}),Object(u.jsxs)("div",{className:C.a.addInfo,children:[Object(u.jsx)("h2",{children:"Additional information"}),Object(u.jsxs)("ul",{children:[Object(u.jsx)("li",{children:Object(u.jsx)(o.c,{to:"".concat(k,"/cast"),className:C.a.link,activeClassName:C.a.activeLink,children:"Cast"})}),Object(u.jsx)("li",{children:Object(u.jsx)(o.c,{to:"".concat(k,"/review"),className:C.a.link,activeClassName:C.a.activeLink,children:"Reviews"})})]})]}),Object(u.jsx)(r.Route,{path:"".concat(L,"/cast"),children:h&&h.cast&&Object(u.jsx)(H,{casts:h.cast})}),Object(u.jsx)(r.Route,{path:"".concat(L,"/review"),children:b&&Object(u.jsx)(M,{review:b.results})})]}):Object(u.jsxs)("p",{children:["No films found on id ",x.movieId]})}function A(){return Object(u.jsx)("h1",{children:"404 Page not found :("})}function J(){return Object(u.jsxs)(x,{children:[Object(u.jsx)(m,{}),Object(u.jsxs)(r.Switch,{children:[Object(u.jsx)(r.Route,{path:"/",exact:!0,children:Object(u.jsx)(R,{})}),Object(u.jsx)(r.Route,{path:"/movies/:movieId",children:Object(u.jsx)(W,{})}),Object(u.jsx)(r.Route,{path:"/movies",exact:!0,children:Object(u.jsx)(F,{})}),Object(u.jsx)(r.Route,{children:Object(u.jsx)(A,{})})]})]})}var q=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,42)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),a(e),n(e),s(e),i(e)}))};c(40);i.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(o.a,{children:Object(u.jsx)(J,{})})}),document.getElementById("root")),q()},8:function(e,t,c){e.exports={moviesList:"HomePage_moviesList__aj4Rq",movieItem:"HomePage_movieItem__2NK0i",info:"HomePage_info__2iNCU"}}},[[41,1,2]]]);
//# sourceMappingURL=main.333ee4ba.chunk.js.map