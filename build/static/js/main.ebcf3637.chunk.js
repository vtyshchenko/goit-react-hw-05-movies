(this["webpackJsonpgoit-react-hw-05-movies-vtyshchenko"]=this["webpackJsonpgoit-react-hw-05-movies-vtyshchenko"]||[]).push([[0],{13:function(e,t,a){e.exports={link:"Navigation_link__2BM9A",activeLink:"Navigation_activeLink__2BSDe Navigation_link__2BM9A"}},18:function(e,t,a){e.exports={ButtonWrapper:"Button_ButtonWrapper__33HL5",Button:"Button_Button__2BYYQ"}},2:function(e,t,a){e.exports={link:"views_link__1JgOK",activeLink:"views_activeLink__1m2DT views_link__1JgOK",isBold:"views_isBold__2Ydo4",goBack:"views_goBack__1AGvj",title:"views_title__3UpWu",movieInfo:"views_movieInfo__1Sf4L",moviePoster:"views_moviePoster__Znnxk",movieData:"views_movieData__1dm-O",movieTitile:"views_movieTitile__23JPB",movieText:"views_movieText__yfDGx",addInfo:"views_addInfo__KIk7R",castList:"views_castList__C9f6w",castInfo:"views_castInfo__1NXji",castsData:"views_castsData__LVGft",castsText:"views_castsText__P4rvL",reviewList:"views_reviewList__1mPPM",itemPoster:"views_itemPoster__ZWRgs",reviewAvatar:"views_reviewAvatar__JWOB7",reviewInfo:"views_reviewInfo__15omb",find:"views_find__2Qz-s"}},23:function(e,t,a){e.exports={header:"Header_header__1v0yI"}},24:function(e,t,a){e.exports={container:"Container_container__3eZVY"}},30:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),s=a(20),i=a.n(s),o=a(5),r=a(3),l=(a(30),a(13)),j=a.n(l),u=a(0);function v(){return Object(u.jsxs)("nav",{children:[Object(u.jsx)(o.c,{exact:!0,to:"/",className:j.a.link,activeClassName:j.a.activeLink,children:"Home"}),Object(u.jsx)(o.c,{to:"/movies",className:j.a.link,activeClassName:j.a.activeLink,children:"Movies"})]})}var d=a(23),h=a.n(d);function m(){return Object(u.jsx)("header",{className:h.a.header,children:Object(u.jsx)(v,{})})}var b=a(24),O=a.n(b);function x(e){var t=e.children;return Object(u.jsx)("div",{className:O.a.container,children:t})}var _=a(9),f=a(7);function p(){var e=localStorage.getItem("language");return e||(function(e){localStorage.setItem("language",String(e))}("en-US"),"en-US")}var g="https://api.themoviedb.org/3",w="7cb7f2a84f35ebc2678afebafcd2cb5f";function N(e){var t=p();return fetch("".concat(g,"/trending/movie/day?api_key=").concat(w,"&page=").concat(e,"&language=").concat(t)).then((function(e){return e.json()}))}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=p();return t||(t=1),fetch("".concat(g,"/search/movie?api_key=").concat(w,"&query=").concat(e,"&language=").concat(a,"&page=").concat(t,"&include_adult=false")).then((function(e){return e.json()}))}var L=a(18),B=a.n(L);var y=function(e){var t=e.onClick;return Object(u.jsx)("div",{className:B.a.ButtonWrapper,children:Object(u.jsx)("button",{className:B.a.Button,type:"button",onClick:t,children:"Load more ..."})})},I=a(8),S=a.n(I);var T=function(){var e=Object(c.useState)(null),t=Object(f.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(1),i=Object(f.a)(s,2),l=i[0],j=i[1],v=Object(c.useState)(0),d=Object(f.a)(v,2),h=d[0],m=d[1],b=Object(r.useRouteMatch)().url,O=Object(r.useLocation)();return Object(c.useEffect)((function(){N(l).then((function(e){j(e.page),n(e.results),m(e.total_pages)}))}),[]),Object(c.useEffect)((function(){N(l).then((function(e){var t;t=a&&a.length>0?[].concat(Object(_.a)(a),Object(_.a)(e.results)):Object(_.a)(e.results),n(t),l>1&&window.scrollBy({top:document.documentElement.clientHeight,behavior:"smooth"})}))}),[l]),a?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("ul",{className:S.a.moviesList,children:a.map((function(e){return Object(u.jsx)("li",{className:S.a.movieItem,children:Object(u.jsxs)(o.b,{to:{pathname:"".concat(b,"movies/").concat(e.id),state:{from:O}},children:[Object(u.jsx)("img",{src:"https://image.tmdb.org/t/p/w500".concat(e.poster_path),alt:e.title}),Object(u.jsxs)("div",{className:S.a.info,children:[e.title,Object(u.jsxs)("p",{children:[e.vote_average," / ",e.vote_count]})]})]})},e.id)}))}),l<h&&Object(u.jsx)(y,{onClick:function(){j((function(e){return e+1}))}})]}):Object(u.jsx)("p",{children:"No films"})},P=a(2),C=a.n(P);function R(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{className:C.a.title,children:"Tranding today"}),Object(u.jsx)(T,{})]})}var D=a(19);function F(){var e=Object(c.useState)(null),t=Object(f.a)(e,2),a=t[0],n=t[1],s=Object(c.useState)(""),i=Object(f.a)(s,2),l=i[0],j=i[1],v=Object(c.useState)(1),d=Object(f.a)(v,2),h=d[0],m=d[1],b=Object(c.useState)(0),O=Object(f.a)(b,2),x=O[0],p=O[1],g=Object(r.useRouteMatch)().url,w=Object(r.useHistory)(),N=Object(r.useLocation)();return Object(c.useEffect)((function(){var e=new URLSearchParams(N.search).get("query");e&&j(e)}),[]),Object(c.useEffect)((function(){l&&k(l,1).then((function(e){n(e.results),p(e.total_pages),w.push(Object(D.a)(Object(D.a)({},N),{},{search:"query=".concat(l)}))}))}),[l]),Object(c.useEffect)((function(){l&&k(l,h).then((function(e){var t;t=a&&a.length>0?[].concat(Object(_.a)(a),Object(_.a)(e.results)):Object(_.a)(e.results),n(t),h>1&&window.scrollBy({top:document.documentElement.clientHeight,behavior:"smooth"})}))}),[h]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("label",{children:["Find movies",Object(u.jsx)("input",{className:C.a.find,type:"text",name:"query",value:l,placeholder:"Search movies",onChange:function(e){j(e.target.value)}})]}),a&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("ul",{className:S.a.moviesList,children:a.map((function(e){return Object(u.jsx)("li",{className:S.a.movieItem,children:Object(u.jsxs)(o.b,{to:{pathname:"".concat(g,"/").concat(e.id),state:{from:N}},children:[Object(u.jsx)("img",{src:"https://image.tmdb.org/t/p/w500".concat(e.poster_path),alt:e.title}),Object(u.jsxs)("div",{className:S.a.info,children:[e.title,Object(u.jsxs)("p",{children:[e.vote_average," / ",e.vote_count]})]})]})},e.id)}))}),h<x&&Object(u.jsx)(y,{onClick:function(){m((function(e){return e+1}))}})]})]})}var E=a(25);function H(e){var t=e.casts;return t.length>0?Object(u.jsx)("ul",{className:C.a.castList,children:t.map((function(e){return Object(u.jsxs)("li",{className:C.a.castInfo,children:[Object(u.jsx)("img",{className:C.a.itemPoster,src:"https://image.tmdb.org/t/p/w500".concat(e.profile_path),alt:e.name,width:"100px"}),Object(u.jsxs)("div",{className:C.a.castsData,children:[Object(u.jsxs)("p",{className:C.a.castsText,children:[Object(u.jsx)("span",{className:C.a.isBold,children:"name: "}),e.name]}),Object(u.jsxs)("p",{className:C.a.castsText,children:[Object(u.jsx)("span",{className:C.a.isBold,children:"gender: "}),2===e.gender?"man":"wooman"]}),Object(u.jsxs)("p",{className:C.a.castsText,children:[Object(u.jsx)("span",{className:C.a.isBold,children:"popularity: "}),e.popularity]}),Object(u.jsxs)("p",{className:C.a.castsText,children:[Object(u.jsx)("span",{className:C.a.isBold,children:"character: "}),e.character]})]})]},e.name)}))}):Object(u.jsx)("p",{className:C.a.reviewList,children:"We don't have any casts"})}function M(e){var t=e.review;return t.length>0?Object(u.jsx)("ul",{className:C.a.reviewList,children:t.map((function(e){var t=e.author_details.avatar_path?e.author_details.avatar_path.substring(1):"";return Object(u.jsxs)("li",{className:C.a.reviewInfo,children:[Object(u.jsx)("img",{className:C.a.reviewAvatar,src:t,alt:e.author,width:"100px",height:"100px"}),Object(u.jsxs)("div",{className:C.a.castsData,children:[Object(u.jsxs)("p",{className:C.a.castsText,children:[Object(u.jsx)("span",{className:C.a.isBold,children:"name: "}),e.author," (created: ",e.created_at,")"]}),Object(u.jsx)("p",{className:C.a.castsText,children:e.content})]})]},"".concat(e.author,"_").concat(e.created_at))}))}):Object(u.jsx)("p",{className:C.a.reviewList,children:"We don't have any review"})}function W(){var e,t,a,n,s,i,l,j,v,d,h=Object(c.useState)(null),m=Object(f.a)(h,2),b=m[0],O=m[1],x=Object(c.useState)(null),_=Object(f.a)(x,2),N=_[0],k=_[1],L=Object(c.useState)(null),B=Object(f.a)(L,2),y=B[0],I=B[1],S=Object(E.useParams)(),T=Object(r.useLocation)(),P=Object(r.useRouteMatch)(),R=P.url,D=P.path;Object(c.useEffect)((function(){(function(e){var t=p();return fetch("".concat(g,"/movie/").concat(e,"?api_key=").concat(w,"&language=").concat(t)).then((function(e){return e.json()}))})(S.movieId).then(O),function(e){var t=p();return fetch("".concat(g,"/movie/").concat(e,"/credits?api_key=").concat(w,"&language=").concat(t)).then((function(e){return e.json()}))}(S.movieId).then(k),function(e,t){var a=p();return t||(t=1),fetch("".concat(g,"/movie/").concat(e,"/reviews?api_key=").concat(w,"&page=").concat(t,"&language=").concat(a)).then((function(e){return e.json()}))}(S.movieId).then(I)}),[]);var F=b&&b.length>0?b.genres.map((function(e){return e.name})).join(", "):"unknown",W=b&&b.length>0?b.production_companies.map((function(e){return e.name})).join(", "):"unknown",A="".concat(null!==(e=null===T||void 0===T||null===(t=T.state)||void 0===t||null===(a=t.from)||void 0===a?void 0:a.pathname)&&void 0!==e?e:"/").concat(null!==(n=null===T||void 0===T||null===(s=T.state)||void 0===s||null===(i=s.from)||void 0===i?void 0:i.search)&&void 0!==n?n:"");return b?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(o.b,{className:C.a.goBack,to:A,children:"\u2190 go back"}),Object(u.jsxs)("div",{className:C.a.movieInfo,children:[Object(u.jsx)("img",{className:C.a.moviePoster,src:"https://image.tmdb.org/t/p/w500".concat(b.poster_path),alt:b.original_title,"min-width":"300px",height:"400px"}),Object(u.jsxs)("div",{className:C.a.movieData,children:[Object(u.jsx)("h1",{className:C.a.title,children:b.original_title}),Object(u.jsx)("h2",{children:"Overview"}),Object(u.jsx)("p",{className:C.a.movieText,children:b.overview}),Object(u.jsx)("h2",{children:"Genres"}),Object(u.jsx)("p",{className:C.a.movieText,children:F}),Object(u.jsx)("h2",{children:"Popularity"}),Object(u.jsx)("p",{className:C.a.movieText,children:b.popularity}),Object(u.jsx)("h2",{children:"Vote (average / count)"}),Object(u.jsxs)("p",{className:C.a.movieText,children:[b.vote_average," / ",b.vote_count]}),Object(u.jsx)("h2",{children:"Release date"}),Object(u.jsx)("p",{className:C.a.movieText,children:b.release_date}),Object(u.jsx)("h2",{children:"Production companies"}),Object(u.jsx)("p",{className:C.a.movieText,children:W})]})]}),Object(u.jsxs)("div",{className:C.a.addInfo,children:[Object(u.jsx)("h2",{children:"Additional information"}),Object(u.jsxs)("ul",{children:[Object(u.jsx)("li",{children:Object(u.jsx)(o.c,{to:{pathname:"".concat(R,"/cast"),state:{from:null!==(l=null===T||void 0===T||null===(j=T.state)||void 0===j?void 0:j.from)&&void 0!==l?l:"/"}},className:C.a.link,activeClassName:C.a.activeLink,children:"Cast"})}),Object(u.jsx)("li",{children:Object(u.jsx)(o.c,{to:{pathname:"".concat(R,"/review"),state:{from:null!==(v=null===T||void 0===T||null===(d=T.state)||void 0===d?void 0:d.from)&&void 0!==v?v:"/"}},className:C.a.link,activeClassName:C.a.activeLink,children:"Reviews"})})]})]}),Object(u.jsx)(r.Route,{path:"".concat(D,"/cast"),children:N&&N.cast&&Object(u.jsx)(H,{casts:N.cast})}),Object(u.jsx)(r.Route,{path:"".concat(D,"/review"),children:y&&Object(u.jsx)(M,{review:y.results})})]}):Object(u.jsxs)("p",{children:["No films found on id ",S.movieId]})}function A(){return Object(u.jsx)("h1",{children:"404 Page not found :("})}function J(){return Object(u.jsxs)(x,{children:[Object(u.jsx)(m,{}),Object(u.jsxs)(r.Switch,{children:[Object(u.jsx)(r.Route,{path:"/",exact:!0,children:Object(u.jsx)(R,{})}),Object(u.jsx)(r.Route,{path:"/movies/:movieId",children:Object(u.jsx)(W,{})}),Object(u.jsx)(r.Route,{path:"/movies",exact:!0,children:Object(u.jsx)(F,{})}),Object(u.jsx)(r.Route,{children:Object(u.jsx)(A,{})})]})]})}var q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,42)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),c(e),n(e),s(e),i(e)}))};a(40);i.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(o.a,{children:Object(u.jsx)(J,{})})}),document.getElementById("root")),q()},8:function(e,t,a){e.exports={moviesList:"HomePage_moviesList__aj4Rq",movieItem:"HomePage_movieItem__2NK0i",info:"HomePage_info__2iNCU"}}},[[41,1,2]]]);
//# sourceMappingURL=main.ebcf3637.chunk.js.map